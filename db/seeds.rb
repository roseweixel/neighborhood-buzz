class SeedDatabase
  PHOTO_URLS = {
  "Battery Park City"=>"https://farm8.staticflickr.com/7572/15789431221_efb889cc87_o.jpg", 
  "Carnegie Hill"=>"carnegie-hill.jpg", 
  "Chelsea"=>"https://farm6.staticflickr.com/5591/14612145143_6c8d752962_o.jpg", 
  "East Harlem"=>"https://farm4.staticflickr.com/3956/15710616486_ca03e3cc11_o.jpg", 
  "East Village"=>"https://farm8.staticflickr.com/7531/15652935040_31dfe1b39c_o.jpg", 
  "Financial District"=>"https://farm9.staticflickr.com/8643/15658301788_3274afb0e5_o.jpg", 
  "Flatiron"=>"https://farm6.staticflickr.com/5609/15212523974_a3bbf751dc_o.jpg",
  "Gramercy"=>"gramercy.jpg", 
  "Hamilton Heights"=>"https://farm4.staticflickr.com/3936/15238358359_855d1afd07_o.jpg", 
  "Harlem"=>"https://farm9.staticflickr.com/8627/15837845352_dd716a4acb_o.jpg", 
  "Hudson Heights"=>"https://farm8.staticflickr.com/7545/15650588707_ef310446dd_o.jpg", 
  "Inwood"=>"https://farm8.staticflickr.com/7486/15849568861_8c677a84f4_o.jpg", 
  "Kips Bay"=>"kips-bay.jpg", 
  "Lower East Side"=>"https://farm8.staticflickr.com/7474/15229535284_abdb3ef723_o.jpg", 
  "Manhattan Valley"=>"manhattan-valley.jpg", 
  "Midtown East"=>"https://farm5.staticflickr.com/4100/4811604391_9eae8513cb_o.jpg", 
  "Midtown West"=>"midtown-west.jpg", 
  "Morningside Heights"=>"https://farm8.staticflickr.com/7533/15195746444_8ac8f34c09_o.jpg", 
  "Mt. Morris Park"=>"https://farm6.staticflickr.com/5480/9477235684_6e6c846d3f_o.jpg", 
  "Murray Hill"=>"https://farm8.staticflickr.com/7537/15806188391_7b4e1727e1_o.jpg", 
  "NoHo"=>"https://farm6.staticflickr.com/5054/5508008968_10552b2466_o.jpg", 
  "Roosevelt Island"=>"https://farm6.staticflickr.com/5608/15199769404_21abfda85f_o.jpg", 
  "Seaport"=>"https://farm6.staticflickr.com/5608/15629355907_f089f5ce07_o.jpg", 
  "Soho"=>"https://farm8.staticflickr.com/7485/15228529423_b27917ece9_o.jpg", 
  "Sugar Hill"=>"https://farm4.staticflickr.com/3919/15068216178_ff2cec9a6f_o.jpg", 
  "Tribeca"=>"https://farm8.staticflickr.com/7568/15188408743_4762c45170_o.jpg", 
  "Union Square"=>"https://farm9.staticflickr.com/8599/15227059093_8e542fd539_o.jpg", 
  "Upper East Side"=>"https://farm9.staticflickr.com/8620/15827887175_2d70f03ff2_o.jpg", 
  "Upper West Side"=>"upper-west-side.jpg", 
  "Village"=>"village.jpg", 
  "Washington Heights"=>"https://farm8.staticflickr.com/7572/15827633516_cfe5ac4018_o.jpg", 
  "West Village"=>"west-village.jpg", 
  "Arverne"=>"https://farm4.staticflickr.com/3934/14991365893_5fed59f9e8_o.jpg", 
  "Astoria"=>"https://farm8.staticflickr.com/7499/15668036317_5f6a03207a_o.jpg", 
  "Bayside"=>"https://farm4.staticflickr.com/3935/15654117775_0257ba3584_o.jpg", 
  "Beechhurst"=>"beechhurst.jpg", 
  "Bellerose"=>"bellerose.jpg", 
  "Breezy Point"=>"https://farm6.staticflickr.com/5571/14996703090_170dd7782d_o.jpg", 
  "Briarwood"=>"briarwood.jpg", 
  "Broad Channel"=>"https://farm8.staticflickr.com/7481/15067316744_57d0fe8084_o.jpg", 
  "Cambria Heights"=>"cambria-heights.jpg", 
  "College Point"=>"https://farm3.staticflickr.com/2945/15290674540_9368353571_o.jpg", 
  "Corona"=>"https://farm9.staticflickr.com/8561/15651221040_f68504ba75_o.jpg", 
  "Douglaston"=>"douglaston.jpg", 
  "East Elmhurst"=>"https://farm4.staticflickr.com/3945/15049051634_6bd573d1c0_o.jpg", 
  "Elmhurst"=>"https://farm8.staticflickr.com/7547/15821002576_5e9e1ac600_o.jpg", 
  "Far Rockaway"=>"far-rockaway.jpg", 
  "Floral Park"=>"https://farm8.staticflickr.com/7477/15497783437_d9a94d4822_o.jpg", 
  "Flushing"=>"https://farm8.staticflickr.com/7557/15660804019_11dedcbe6b_o.jpg", "Forest Hills"=>"https://farm6.staticflickr.com/5603/15648118289_2728f92895_o.jpg", 
  "Fresh Meadows"=>"https://farm6.staticflickr.com/5496/12296668594_3720da49da_o.jpg", 
  "Glen Oaks"=>"https://farm4.staticflickr.com/3931/15509886155_20186457f2_o.jpg", 
  "Glendale"=>"https://farm4.staticflickr.com/3932/15441755295_393f0be847_o.jpg", 
  "Hollis"=>"https://farm4.staticflickr.com/3899/14519057848_614eeedfa0_o.jpg", 
  "Howard Beach"=>"https://farm4.staticflickr.com/3939/15625530762_c525b710ed_o.jpg", 
  "Jackson Heights"=>"https://farm8.staticflickr.com/7565/15848782252_1a03febff1_o.jpg", 
  "Jamaica"=>"https://farm8.staticflickr.com/7539/15851888252_c1e4b14634_o.jpg", 
  "JFK Airport"=>"https://farm8.staticflickr.com/7470/15851879222_4db54161eb_o.jpg", 
  "Kew Gardens"=>"https://farm8.staticflickr.com/7347/13070128634_fcbf847e02_o.jpg", 
  "Kew Gardens Hills"=>"https://farm6.staticflickr.com/5587/15169690242_b11823e217_o.jpg", 
  "Little Neck"=>"https://farm4.staticflickr.com/3912/14193877190_4a8fed5d8d_o.jpg", 
  "Long Island City"=>"https://farm9.staticflickr.com/8591/15852038092_f8339743f2_o.jpg", 
  "Maspeth"=>"maspeth.jpg", 
  "Middle Village"=>"https://farm9.staticflickr.com/8620/15827887175_2d70f03ff2_o.jpg", 
  "Ozone Park"=>"https://farm4.staticflickr.com/3853/14839346939_b47de76210_o.jpg", 
  "Queens Village"=>"https://farm4.staticflickr.com/3947/15576623757_694fe40066_o.jpg", 
  "Rego Park"=>"rego-park.jpg", 
  "Richmond Hill"=>"richmond-hill.jpg", 
  "Ridgewood"=>"https://farm8.staticflickr.com/7578/15647995329_4f0e6364a0_o.jpg", 
  "Rockaway Park"=>"https://farm6.staticflickr.com/5611/15790797241_95c941c9f8_o.jpg", 
  "Rosedale"=>"https://farm3.staticflickr.com/2835/12820070165_4c5b05f9a5_o.jpg", 
  "South Jamaica"=>"https://farm6.staticflickr.com/5556/14978902515_549b0b0fb8_o.jpg", 
  "South Ozone Park"=>"https://farm4.staticflickr.com/3910/14839346029_a5cf806588_o.jpg", 
  "Springfield Gardens"=>"https://farm8.staticflickr.com/7429/13110480393_1f47c78069_o.jpg", 
  "St. Albans"=>"https://farm4.staticflickr.com/3796/9571325978_54bb52d173_o.jpg", 
  "Sunnyside"=>"https://farm8.staticflickr.com/7477/15844801031_daa3026f83_o.jpg", 
  "Utopia"=>"https://farm3.staticflickr.com/2823/9043335803_0e51525376_o.jpg", 
  "Whitestone"=>"https://farm8.staticflickr.com/7557/15748083845_a91664dbb1_o.jpg", 
  "Woodhaven"=>"https://farm6.staticflickr.com/5597/15083725443_36ddff60fc_o.jpg", 
  "Woodside"=>"https://farm9.staticflickr.com/8656/15821092726_b8e4c3c644_o.jpg", 
  "Bath Beach"=>"https://farm4.staticflickr.com/3745/14246119816_32989c1230_o.jpg", 
  "Bay Ridge"=>"https://farm8.staticflickr.com/7530/15775153135_110cd68265_o.jpg", 
  "Bedford Stuyvesant"=>"https://farm3.staticflickr.com/2943/15179149430_bd74a66210_o.jpg", 
  "Bensonhurst"=>"https://farm8.staticflickr.com/7520/15582881878_2ceac3a591_o.jpg", 
  "Bergen Beach"=>"https://farm8.staticflickr.com/7525/15852217512_b7afd3a6c4_o.jpg", 
  "Boerum Hill"=>"boerum-hill.jpg", 
  "Borough Park"=>"https://farm8.staticflickr.com/7472/15621595610_03d48567bf_o.jpg", 
  "Brighton Beach"=>"https://farm8.staticflickr.com/7482/15177283594_9f7103b7f0_o.jpg", 
  "Brooklyn Heights"=>"https://farm9.staticflickr.com/8639/15668722387_8cc839bd8b_o.jpg", 
  "Brownsville"=>"https://farm4.staticflickr.com/3944/15372482937_233cfb09a9_o.jpg", 
  "Bushwick"=>"https://farm9.staticflickr.com/8593/15783231756_ef788dde08_o.jpg", 
  "Canarsie"=>"https://farm6.staticflickr.com/5580/14898681798_ae5f7c54bb_o.jpg", 
  "Carroll Gardens"=>"carroll-gardens.jpg", 
  "Clinton Hill"=>"clinton-hill.jpg", 
  "Cobble Hill"=>"https://farm6.staticflickr.com/5609/15461046940_3442cbc036_o.jpg", 
  "Coney Island"=>"https://farm8.staticflickr.com/7499/15853791612_379f08ebbe_o.jpg", 
  "Crown Heights"=>"crown-heights.jpg", 
  "Ditmas Park"=>"ditmas-park.jpg", 
  "Dumbo"=>"https://farm8.staticflickr.com/7474/15229535284_abdb3ef723_o.jpg", 
  "Dyker Heights"=>"https://farm4.staticflickr.com/3949/15437633539_780180a04a_o.jpg", 
  "East New York"=>"https://farm8.staticflickr.com/7576/15828007286_bb4573daef_o.jpg", 
  "Flatbush"=>"flatbush.jpg", 
  "Flatlands"=>"https://farm8.staticflickr.com/7499/15668036317_5f6a03207a_o.jpg", 
  "Fort Greene"=>"https://farm6.staticflickr.com/5602/15610949859_e523b85894_o.jpg", 
  "Fort Hamilton"=>"fort-hamilton.jpg", 
  "Gravesend"=>"https://farm4.staticflickr.com/3894/14929018269_1f856ac210_o.jpg", 
  "Greenpoint"=>"https://farm6.staticflickr.com/5607/15186597593_3e21e8b7fb_o.jpg", 
  "Kensington"=>"https://farm8.staticflickr.com/7509/15718278456_a867f4b5f4_o.jpg", 
  "Manhattan Beach"=>"https://farm9.staticflickr.com/8537/15177203823_35deaffaa9_o.jpg", 
  "Midwood"=>"https://farm6.staticflickr.com/5616/15575645045_826d5b1e7e_o.jpg", 
  "Mill Basin"=>"mill-basin.jpg", 
  "Navy Yard"=>"https://farm8.staticflickr.com/7497/15039357773_4ef0f785fb_o.jpg", 
  "Ocean Hill"=>"https://farm4.staticflickr.com/3929/15340315669_38d1650f90_o.jpg", 
  "Park Slope"=>"park-slope.jpg", 
  "Prospect Heights"=>"prospect-heights.jpg", 
  "Prospect Lefferts Gardens"=>"prospect-lefferts-gardens.jpg", 
  "Red Hook"=>"https://farm6.staticflickr.com/5614/15643321238_de482c6565_o.jpg", 
  "Sheepshead Bay"=>"https://farm6.staticflickr.com/5597/15576435836_94995609c1_o.jpg", 
  "Spring Creek"=>"spring-creek.jpg", 
  "Starrett City"=>"https://farm6.staticflickr.com/5614/15072927104_48a5274115_o.jpg", 
  "Sunset Park"=>"sunset-park.jpg", 
  "Vinegar Hill"=>"https://farm6.staticflickr.com/5606/15343709937_5249c8c044_o.jpg", 
  "Williamsburg"=>"https://farm8.staticflickr.com/7505/15234343593_4a42da7e17_o.jpg", 
  "Windsor Terrace"=>"https://farm6.staticflickr.com/5598/15564880711_b7e602a738_o.jpg"
}
  def initialize
    create_users
    create_boroughs
    create_neighborhoods_from_boroughs
    create_restaurants
    create_bars
    add_photo_url_to_neighborhoods
    add_median_buy_price_to_neighborhoods
    add_noko_listing_attributes_to_neighborhoods
    add_median_buy_price_string_to_neighborhoods
  end

  def create_users
    User.create([
      {username: 'Bob', email: 'bob@example.com', commute_address: '11 Broadway'},
      {username: 'Alice', email: 'alice@example.com', commute_address: '1740 Broadway'},
      {username: 'Jerry', email: 'jdog@example.com', commute_address: '646 Lenox Avenue'}
    ])
  end

  def create_boroughs
    Borough.create([
      {name: 'Manhattan'},
      {name: 'Brooklyn'},
      {name: 'Queens'}
    ])
  end

  def create_neighborhoods_from_boroughs
    create_manhattan_neighborhoods
    create_brooklyn_neighborhoods
    create_queens_neighborhoods
  end

  def create_manhattan_neighborhoods
    manhattan = Borough.where(name: 'Manhattan').first
    manhattan.neighborhoods.create([
      {name: "Battery Park City"},
      {name: "Chelsea"},
      {name: "East Harlem"},
      {name: "East Village"},
      {name: "Financial District"},
      {name: "Flatiron"},
      {name: "Gramercy"},
      {name: "Hamilton Heights"},
      {name: "Harlem"},
      {name: "Inwood"},
      {name: "Kips Bay"},
      {name: "Lower East Side"},
      {name: "Manhattan Valley"},
      {name: "Midtown East"},
      {name: "Midtown West"},
      {name: "Morningside Heights"},
      {name: "Murray Hill"},
      {name: "NoHo"},
      {name: "Roosevelt Island"},
      {name: "Soho"},
      {name: "Tribeca"},
      {name: "Union Square"},
      {name: "Upper East Side"},
      {name: "Upper West Side"},
      {name: "Washington Heights"},
      {name: "West Village"}
    ])
  end

  def create_brooklyn_neighborhoods
    brooklyn = Borough.where(name: 'Brooklyn').first
    brooklyn.neighborhoods.create([
      {name: "Bay Ridge"},
      {name: "Bedford Stuyvesant"},
      {name: "Bensonhurst"},
      {name: "Boerum Hill"},
      {name: "Borough Park"},
      {name: "Brighton Beach"},
      {name: "Brooklyn Heights"},
      {name: "Brownsville"},
      {name: "Bushwick"},
      {name: "Canarsie"},
      {name: "Carroll Gardens"},
      {name: "Clinton Hill"},
      {name: "Cobble Hill"},
      {name: "Coney Island"},
      {name: "Crown Heights"},
      {name: "Ditmas Park"},
      {name: "Dumbo"},
      {name: "Dyker Heights"},
      {name: "East New York"},
      {name: "Flatbush"},
      {name: "Fort Greene"},
      {name: "Fort Hamilton"},
      {name: "Gravesend"},
      {name: "Greenpoint"},
      {name: "Kensington"},
      {name: "Midwood"},
      {name: "Ocean Hill"},
      {name: "Park Slope"},
      {name: "Prospect Heights"},
      {name: "Prospect Lefferts Gardens"},
      {name: "Red Hook"},
      {name: "Sheepshead Bay"},
      {name: "Sunset Park"},
      {name: "Vinegar Hill"},
      {name: "Williamsburg"},
      {name: "Windsor Terrace"}
    ])
  end

  def create_queens_neighborhoods
    queens = Borough.where(name: 'Queens').first
    queens.neighborhoods.create([
      {name: "Astoria"},
      {name: "Bayside"},
      {name: "Bellerose"},
      {name: "Briarwood"},
      {name: "College Point"},
      {name: "Corona"},
      {name: "Douglaston"},
      {name: "Elmhurst"},
      {name: "Far Rockaway"},
      {name: "Floral Park"},
      {name: "Flushing"},
      {name: "Forest Hills"},
      {name: "Fresh Meadows"},
      {name: "Glen Oaks"},
      {name: "Glendale"},
      {name: "Hollis"},
      {name: "Howard Beach"},
      {name: "Jackson Heights"},
      {name: "Jamaica"},
      {name: "Kew Gardens"},
      {name: "Kew Gardens Hills"},
      {name: "Little Neck"},
      {name: "Long Island City"},
      {name: "Maspeth"},
      {name: "Middle Village"},
      {name: "Ozone Park"},
      {name: "Queens Village"},
      {name: "Rego Park"},
      {name: "Richmond Hill"},
      {name: "Ridgewood"},
      {name: "St. Albans"},
      {name: "Sunnyside"},
      {name: "Utopia"},
      {name: "Whitestone"},
      {name: "Woodhaven"},
      {name: "Woodside"}
    ])
  end

  def add_photo_url_to_neighborhoods
    Neighborhood.all.each do |neighborhood|
      neighborhood.update(photo_url: PHOTO_URLS[neighborhood.name])
    end
  end

  def add_median_buy_price_to_neighborhoods
    Neighborhood.all.each do |neighborhood|
      sleep(0.1)
      money_string = neighborhood.find_50th_percentile
      median_buy_price = money_string.gsub(/[$,]/, "").to_i
      neighborhood.update(median_buy_price: median_buy_price)
    end
  end

  def add_median_buy_price_string_to_neighborhoods
    Neighborhood.all.each do |neighborhood|
      sleep(0.1)
      money_string = neighborhood.find_50th_percentile
      neighborhood.update(median_buy_price_string: money_string)
    end
  end

  def add_noko_listing_attributes_to_neighborhoods
    Neighborhood.all.each do |neighborhood|
      noko_listing = neighborhood.noko_listing
      neighborhood.update(
        median_rental_price: noko_listing[:median_rent],
        median_rental_price_integer: noko_listing[:median_rent_integer],
        noko_search_url: noko_listing[:search_url],
        
        noko_img_url_1: noko_listing[:img_url_1],
        noko_img_url_2: noko_listing[:img_url_2],
        noko_img_url_3: noko_listing[:img_url_3],

        noko_listing_url_1: noko_listing[:listing_url_1],
        noko_listing_url_2: noko_listing[:listing_url_2],
        noko_listing_url_3: noko_listing[:listing_url_3],

        noko_monthly_rent_1: noko_listing[:monthly_rent_1],
        noko_monthly_rent_2: noko_listing[:monthly_rent_2],
        noko_monthly_rent_3: noko_listing[:monthly_rent_3]
        )
    end
  end

  def create_restaurants
    Neighborhood.all.each do |neighborhood|
      restaurants = neighborhood.get_yelp_top_three_restaurants
      restaurants.each do |restaurant|
        neighborhood.restaurants.create(name: restaurant[:name], url: restaurant[:url], stars_img: restaurant[:stars_img], address: restaurant[:address])
      end
    end
  end

  def create_bars
    Neighborhood.all.each do |neighborhood|
      bars = neighborhood.get_yelp_top_three_bars
      bars.each do |bar|
        neighborhood.bars.create(name: bar[:name], url: bar[:url], stars_img: bar[:stars_img], address: bar[:address])
      end
    end
  end


end

SeedDatabase.new